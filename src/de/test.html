<!DOCTYPE html>
<html lang="de_CH">
    <head>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    </head>
    <form id="bookingForm" action="javascript:bookingRequest()">
        <table>
            <tr>
                <td>
                    <input type="radio" name="title" value="mr"> Herr
                    <input type="radio" name="title" value="ms"> Frau
                </td>                
            </tr>
            <tr>
                <td>
                    <input type="text" id="firstname" placeholder="Vorname">
                </td>
                <td>
                    <input type="text" id="lastname" placeholder="Nachname">
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" id="street" placeholder="Adresse, Nr.">
                </td>
                <td>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" id="zip" placeholder="PLZ">
                </td>
                <td>
                    <input type="text" id="city" placeholder="Stadt">
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" id="country" placeholder="Land">
                </td>
                <td>
                </td>
            </tr>
            <tr>
                <td>
                    Anreise: <br>
                    <input type="date" id="arrival" placeholder="Anreise">
                </td>
                <td>
                    Abreise: <br>
                    <input type="date" id="departure" placeholder="Abreise">
                </td>
            </tr>
            <tr>
                <td>
                    Doppelzimmer: <br>
                    <input type="checkbox" name="apartmentId" value="482BCB5C-94F4-400B-84D7-512917239417"> Wildstrubel <br>
                    <input type="checkbox" name="apartmentId" value="D14C40CD-39E1-4718-AB5E-713E90EC0E87"> Länge Egg <br>
                    <input type="checkbox" name="apartmentId" value="81740335-07BE-457D-B179-A53E70E902CF"> Betelberg
                </td>
                <td>
                    Einzelzimmer: <br>
                    <input type="checkbox" name="apartmentId" value="4D852D20-4D9C-455B-9F41-54332AAFA51D"> Leiterli <br>
                    <input type="checkbox" name="apartmentId" value="8940C2BC-7174-43B1-A769-84AE14A24D25"> Höji<br>
                    <input type="checkbox" name="apartmentId" value="BD70A0F0-2A25-4452-9600-9B490D1D00EF"> Buggeli
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" id="message" placeholder="message">
                </td>
            </tr>
                
        </table>

      <input type="submit" value="Submit">
      <input type="reset" value="Reset">
    </form>

<script>

function bookingRequest() {
    
    var selecedApartments = [];
    
    $("input:checkbox[name=apartmentId]:checked").each(function (){
        selecedApartments.push(this.value);
    });
    
    var booking = {
      Arrival: $("#arrival").val(),
      Departure: $("#departure").val(),
      ApartmentIds: selecedApartments,
      Title: $("input:radio[name=title]:checked").val(),
      FirstName: $("#firstname").val(),
      LastName: $("#lastname").val(),
      Address: $("#address").val(),
      Zip: $("#zip").val(),
      City: $("#city").val(),
      Country: $("#country").val(),
      Message: $("#message").val()
    };

    console.log(JSON.stringify(booking));

    $.ajax({
        url: 'https://amswebclient.azurewebsites.net/api/webbooking',
        type: 'POST',
        data:JSON.stringify(booking),
        contentType: "application/json;charset=utf-8",
        success: function (data) {
            console.log(data);
        },
        error: function (x, y, z) {
            alert(x + '\n' + y + '\n' + z);
        }
    });
}
</script>


</html>
